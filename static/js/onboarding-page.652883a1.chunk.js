"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[20945],{57788:(e,l,a)=>{a.r(l),a.d(l,{OnboardingPage:()=>Q,PageEvent:()=>J,default:()=>ee});a(4173),a(64925),a(54819),a(6886);var o=a(52322),n=a(15946),t=a(9348),s=a(46209),i=a(2784),r=a(48703);const d=(0,i.memo)((e=>{let{backgroundImageUrl:l,visible:a=!1}=e;return(0,o.jsx)("div",{className:"Background-module__backgroundImage___lsG2m",style:{backgroundImage:l,opacity:a?"1":"0"}})}));a(77950),a(88233),a(94908);var c=a(96473),u=a(16216),_=a(12524),m=a.n(_),g=a(4517),v="ButtonOverlay-module__button___-iU8d",b=a(33456),h=a(23395),p=a(87223),C=a(88286),x=a(2053),k=a(86523),f=a(5653),j=a(5801);const N=(0,b.A)(c.kD),L=(0,b.A)(c.kD),S=(0,i.memo)((e=>{let{telemetryLocation:l,dispatch:a,className:t,setAnnounceContent:s}=e;const[r,d,_]=(0,k.QF)("OnboardingPageV4_Button_See_Games_Label","OnboardingPageV4_Button_Sign_In_Or_Sign_Up_Label","Accessibility_Row_Item"),b=(0,j.hW)(l),{search:S}=(0,g.TH)(),U=(0,x.j)(),[,,{setUserSetting:y}]=(0,p.B)("hasSkippedOnboarding");let I=f.Home.getLink();if(S){const e=U.toString();e&&(I=`${I}?${e}`)}const D=(0,h.P)(),P=(0,C.X)(),w=(0,i.useCallback)((()=>{const e=setTimeout((()=>{P.current&&s(!0)}),1500);return()=>{clearTimeout(e)}}),[P,s]);return(0,o.jsx)("div",{className:m()("ButtonOverlay-module__background___ivopW",t),children:(0,o.jsxs)(n.FocusGroup,{className:"ButtonOverlay-module__buttonRow___YUJ3N",onDown:()=>(a(J.PageDown),!0),onUp:()=>(a(J.PageUp),!0),onFocus:w,children:[(0,o.jsx)(N,{className:v,as:"a",isCallToAction:!0,href:D,buttonType:c.L$.Brand,overlayMode:c.gT.Solid,buttonSize:c.qE.Large,onClick:()=>{b.trackLink(D,"GetStartedButton")},"data-auto-focus":!0,"aria-label":(0,u.WUZ)(_,d,"1","2"),children:d}),(0,o.jsx)(L,{className:v,as:"a",isCallToAction:!0,href:I,buttonType:c.L$.Secondary,overlayMode:c.gT.Solid,buttonSize:c.qE.Large,onClick:()=>{y(!0),b.trackLink(I,"SeeTheGamesButton")},"aria-label":(0,u.WUZ)(_,r,"2","2"),children:r})]})})}));a(31235),a(52856),a(26464),a(57610);var U=a(8318),y=a(81634),I=a(52665);const D=(0,i.memo)((e=>{let{game:l}=e;const[a,n,t,s,r,d]=(0,k.QF)("OnboardingPageV4_PlayForFree","OnboardingPageV4_ComingSoonToGamePass","OnboardingPageV4_IncludedWithGamePass","OnboardingPageV4_PlayDayOneWithGamePass","Accessibility_GameRating","Accessibility_GameRating_RatingSystem"),[c,_,m,g]=(0,i.useMemo)((()=>{var e;const o=(0,y._O)(null===l||void 0===l?void 0:l.productId),i=l&&l.detailLevel===I.G.Detailed&&l.releaseDate&&new Date(l.releaseDate)>new Date,c=l&&l.detailLevel===I.G.Detailed&&l.publisherName&&U.gK.some((e=>{var a;return null===(a=l.publisherName)||void 0===a?void 0:a.includes(e)})),_=i&&c?s:i?n:o?a:t,m=(null===l||void 0===l?void 0:l.detailLevel)===I.G.Detailed?l.ratingValueLogoUrl:"",g=(null===l||void 0===l?void 0:l.detailLevel)===I.G.Detailed?l.ratingValue:"",v=(null===l||void 0===l?void 0:l.detailLevel)===I.G.Detailed&&"ESRB"===(null===(e=null===l||void 0===l?void 0:l.ratingSystem)||void 0===e?void 0:e.toUpperCase())?(0,u.WUZ)(d,"ESRB",g):(0,u.WUZ)(r,g);return[_,m,(null===l||void 0===l?void 0:l.detailLevel)===I.G.Detailed?l.ratingValue:"",v]}),[l,s,n,a,t,d,r]);return(0,o.jsxs)("div",{className:"GameCard-module__container___3AeeZ",children:[(0,o.jsx)("div",{className:"GameCard-module__title___EXOfr",children:null===l||void 0===l?void 0:l.title}),(0,o.jsx)("div",{className:"GameCard-module__subTitle___4xuxT",children:c}),(0,o.jsxs)("div",{className:"GameCard-module__ratingContainer___WNk5t",children:[(0,o.jsx)("div",{className:"GameCard-module__ratingText___PtwqY",children:m}),(0,o.jsx)("div",{className:"GameCard-module__ratingIcon___fNcs4",children:(0,o.jsx)("img",{src:_,alt:g})})]})]},null===l||void 0===l?void 0:l.title)}));var P=a(59387);const w=(0,i.memo)((e=>{let{upsellStrings:l,className:a}=e;return(0,o.jsx)("div",{className:a,children:l.map(((e,l)=>(0,o.jsx)(c.j0,{className:"UpsellList-module__iconText___WhgjY",icon:P.Z,label:e,iconClassName:"UpsellList-module__icon___GbyjR",labelClassName:"UpsellList-module__label___Jo3Kb",style:{animationDuration:"1s",animationDirection:"normal",animationTimingFunction:"linear",animationFillMode:"forwards",animationDelay:`${1+l}s`}},e)))})}));a(82488),a(30390);var O="VerticalCarousel-module__deSelectAnimation___HuxKE",G="VerticalCarousel-module__selectAnimation___-CzgK",A=a(87592);const V=(0,i.memo)((e=>{let{productInfo:l}=e;const a=null===l||void 0===l?void 0:l.tileImageUrl,n=(0,i.useMemo)((()=>a?(0,t.getResizeUrl)(a,200,200):""),[a]);return n?(0,o.jsx)("img",{src:n,alt:null===l||void 0===l?void 0:l.title}):(0,o.jsx)(A.O,{className:"CarouselGame-module__item___rrr5J"})}));var T;!function(e){e.None="none",e.Down="down",e.Up="up"}(T||(T={}));const B=(e,l)=>1===e?0:l===T.Down||l===T.None?5:6,Z=(e,l)=>{let{games:a,onGameSelected:n}=e;const[t,s]=(0,i.useState)([]),[r,d]=(0,i.useState)(0),[c,u]=(0,i.useState)(T.None),_=B(t.length,c),g=(0,i.useCallback)(((e,l)=>{var a,o,t,s,i,r;const d=null===(o=null===(a=e[l])||void 0===a?void 0:a.props)||void 0===o?void 0:o.productInfo,c=null===(s=null===(t=e[l+1])||void 0===t?void 0:t.props)||void 0===s?void 0:s.productInfo,u=null===(r=null===(i=e[l-1])||void 0===i?void 0:i.props)||void 0===r?void 0:r.productInfo;n(d,c,u)}),[n]);(0,i.useEffect)((()=>{var e;const l=null===a||void 0===a?void 0:a.every((e=>(null===e||void 0===e?void 0:e.detailLevel)===I.G.Detailed));if(0===t.length&&l){const l=null!==(e=null===a||void 0===a?void 0:a.map(((e,l)=>(0,o.jsx)(V,{productInfo:e},(null===e||void 0===e?void 0:e.productId)||l))))&&void 0!==e?e:[];s(l),g(l,B(l.length,T.None))}}),[t,a,g]);const v=(0,i.useRef)(null),b=(0,i.useRef)(),h=(0,i.useCallback)((()=>(v.current&&clearInterval(v.current),v.current=setInterval((()=>{b.current&&b.current()}),16e3),()=>{v.current&&clearInterval(v.current)})),[]),p=(0,i.useCallback)((()=>{if(t.length<2)return;let e=[...t];if(c===T.Down||c===T.None){const l=e[e.length-1],a=e.slice(0,e.length-1);e=[l,...a]}s(e);const l=T.Down;u(l),g(e,B(e.length,l)),d((e=>e+1)),b.current=p,h()}),[t,c,h,g]),C=(0,i.useCallback)((()=>{if(t.length<2)return;let e=[...t];if(c===T.Up){const l=e[0],a=e.slice(1);e=[...a,l]}s(e);const l=T.Up;u(l),g(e,B(e.length,l)),d((e=>e+1)),b.current=C,h()}),[t,c,h,g]);(0,i.useEffect)((()=>{b.current=p,h()}),[p,h]),(0,i.useImperativeHandle)(l,(()=>({scrollDown:p,scrollUp:C})),[p,C]);const x=(0,i.useCallback)((e=>e===T.None?"VerticalCarousel-module__carouselItemListScrolled___iCBnU":e===T.Down?"VerticalCarousel-module__carouselItemListScrollingDown___B9gwo":"VerticalCarousel-module__carouselItemListScrollingUp___eYzJc"),[]),k=(0,i.useCallback)(((e,l,a)=>{let o="VerticalCarousel-module__carouselItem___U+93o";return o=a===T.None?`${o} ${e===l?"VerticalCarousel-module__carouselItemSelected___YyUVh":""}`:a===T.Down?`${o} ${e===l?G:e===l+1?O:""}`:`${o} ${e===l?G:e===l-1?O:""}`,o}),[]);return(0,o.jsx)("div",{className:"VerticalCarousel-module__carouselContainer___NVl1H",children:(0,o.jsx)("div",{className:m()("VerticalCarousel-module__carouselItemListContainer___b4sZW",t.length>1?"VerticalCarousel-module__carouselItemListContainerMultiItem___snZU4":"VerticalCarousel-module__carouselItemListContainerSingleItem___X9Zl4"),children:(0,o.jsx)("div",{className:x(c),children:t?t.map(((e,l)=>(0,o.jsx)("div",{className:k(l,_,c),children:e},l))):null},r)})})},$=(0,i.forwardRef)(Z),R=(0,i.memo)((e=>{let{className:l}=e;const a=(0,k.iV)("OnboardingPage_Xbox_Logo_Alt");return(0,o.jsxs)("svg",{className:l,width:"1em",height:"1em",viewBox:"0 0 1228 360",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("title",{children:a}),(0,o.jsxs)("g",{id:"Home",stroke:"none",strokeWidth:"1",fillRule:"evenodd",children:[(0,o.jsx)("path",{d:"M626.41,290.88H589.58l-63.4-87.26-63.39,87.26H426l81.82-112.61L432.38,74.51h36.83l57,78.42,57-78.42H620L544.6,178.27Zm191.18-61.53c0,19-6.3,34.17-18.74,45.09s-30.49,16.44-53.69,16.44H643.71V194.52H595.5l20.06-27.6h28.15V74.51h97.21c21.79,0,38.74,5.22,50.36,15.53s17.53,24.06,17.53,40.84c0,20.81-9.44,36.59-28,46.91,12,4.65,21.22,11.48,27.38,20.32A53.51,53.51,0,0,1,817.59,229.35ZM676.76,166.92h62c12.49,0,22-2.8,28.2-8.33s9.36-13.92,9.36-25c0-9.56-3.28-17.12-9.74-22.49S750.79,103,738.8,103h-62Zm107.48,61.83c0-11.36-3.43-20-10.19-25.67s-17.11-8.56-30.71-8.56H676.76v67.85h66.58c13.2,0,23.43-2.93,30.41-8.72S784.24,239.51,784.24,228.75Zm255.62-46.06c0,16.73-2.43,32.08-7.22,45.63A103.78,103.78,0,0,1,1011,264.41a95.16,95.16,0,0,1-33.75,23.49c-12.7,5.19-27.12,7.83-42.84,7.83-15.93,0-30.44-2.64-43.15-7.83a92.32,92.32,0,0,1-33.44-23.48,102.24,102.24,0,0,1-21.88-35.94c-4.84-13.56-7.29-29-7.29-45.79s2.45-32.1,7.29-45.71a105.06,105.06,0,0,1,21.88-36.31,92.22,92.22,0,0,1,33.44-23.26c12.71-5.14,27.22-7.75,43.15-7.75,15.72,0,30.14,2.61,42.84,7.75A95.27,95.27,0,0,1,1011,100.66,105.4,105.4,0,0,1,1032.64,137C1037.43,150.59,1039.86,166,1039.86,182.69Zm-177,0c0,25.46,6.6,45.88,19.62,60.7,12.81,15,30.26,22.61,51.88,22.61s39.07-7.61,51.87-22.61h0c12.81-14.62,19.31-35,19.31-60.7s-6.5-46.18-19.31-61c-13-14.8-30.46-22.31-51.88-22.31s-38.87,7.51-51.88,22.31C869.51,136.91,862.9,157.44,862.9,182.69Zm281.34-4.42,75.39-103.76H1182.8l-57,78.42-57-78.42H1032l75.39,103.76L1025.6,290.88h36.83l63.4-87.26,63.39,87.26h36.84Z"}),(0,o.jsx)("path",{d:"M180,144.36a1.11,1.11,0,0,1,.59.3c53.83,40.94,146,142.23,117.9,170.84a180,180,0,0,1-237,0c-28.1-28.61,64.06-129.9,117.89-170.84A1.18,1.18,0,0,1,180,144.36Zm93.77-118C246.2,10,216.33,0,180,0S113.8,10,86.23,26.34a.69.69,0,0,0-.3.89.71.71,0,0,0,.87.31c34.86-7.53,87.8,22.57,92.82,25.59a.59.59,0,0,0,.76,0c5-3,58-33.12,92.82-25.59a.71.71,0,0,0,.87-.31A.69.69,0,0,0,273.77,26.34ZM54,51.65a3.15,3.15,0,0,0-.8.61A179.95,179.95,0,0,0,36.81,289.05a.77.77,0,0,0,1,.29.74.74,0,0,0,.2-.93C24.26,246,94.41,143.14,130.64,100a.83.83,0,0,0,.25-.52.79.79,0,0,0-.31-.6C75.67,44.29,57,50.09,54,51.65ZM229.42,98.9a.79.79,0,0,0-.31.6.83.83,0,0,0,.25.52C265.59,143.14,335.74,246,322,288.41a.74.74,0,0,0,.2.93.77.77,0,0,0,1-.29A179.95,179.95,0,0,0,306.8,52.26a3.15,3.15,0,0,0-.8-.61C303,50.09,284.33,44.29,229.42,98.9Z"})]})]})}));var E=a(18497),H=a(21883),M=a(91912),F=a(70800);var W=a(89085),K=a(83929),q=a(48068),z=a(62598),Y=a(98660),X=a(21820);a(43430),a(9e4),a(48166),a(18339),a(45162);var J;!function(e){e.PageUp="pageUp",e.PageDown="pageDown"}(J||(J={}));const Q=(0,i.memo)((()=>{const e="OnboardingPage",l=(0,s.useLogger)("OnboardingPage"),[a,c,u,_]=(0,k.QF)("OnboardingPageV4_Title","OnboardingPageV4_Upsell1","OnboardingPageV4_Upsell2","OnboardingPageV4_Upsell3"),[m,g]=(0,i.useState)(),[v,b]=(0,i.useState)(!1);(0,z.A)();const h=(0,K.G)();(0,Y.Yf)((0,i.useCallback)((()=>(h(q.Nj.path,{}),!1)),[h])),(0,i.useEffect)((()=>{var e;try{null===(e=globalThis.window)||void 0===e||e.sessionStorage.setItem(U.TC,"true")}catch(a){const e=(0,W.L)(a);l.warn("Failed to access storage",e.message)}}),[l]);const[p]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const[,l]=(0,E.X)(F.C.CloudSmartTvLandingGallery),a=(0,i.useMemo)((()=>(0,H.lceTransform)(l,(l=>{var a;const o=null===(a=l.products)||void 0===a?void 0:a.length;let n;return n=o>e?l.products.slice(0,e):o>0?l.products:new Array(e).fill(""),[...n.slice(0,6).reverse(),...n.slice(6).reverse()]}))),[l,e]);return(0,M.s)(a)}(20),[C]=(0,X.k)(null!==p&&void 0!==p?p:[],I.G.Detailed),x=C&&C.length>0,f=(0,i.useRef)(null),N=(0,i.useCallback)((e=>{var a,o;l.debug(`dispatch PageEvent: ${e}`),e===J.PageDown?null===(a=f.current)||void 0===a||a.scrollUp():e===J.PageUp&&(null===(o=f.current)||void 0===o||o.scrollDown())}),[l]),{touch:L,enqueue:y,trim:P,enumerateSortedByKey:O}=(()=>{const[e,l]=(0,i.useState)([]),a=(0,i.useCallback)(((e,a)=>(l((l=>{const o=l.filter((l=>l.key!==e));return[...o,{key:e,data:a}]})),a)),[]),o=(0,i.useCallback)((l=>{var a;return null===(a=e.find((e=>e.key===l)))||void 0===a?void 0:a.data}),[e]),n=(0,i.useCallback)((e=>{const l=o(e);if(l)return a(e,l),l}),[a,o]),t=(0,i.useCallback)(((e,l)=>o(e)?n(e):a(e,l)),[a,o,n]),s=(0,i.useCallback)((e=>{l((l=>l.filter((l=>l.key!==e))))}),[]),r=(0,i.useCallback)((e=>{l((l=>{const a=Math.max(l.length-e,0);return l.slice(a)}))}),[]),d=(0,i.useCallback)((()=>e.sort(((e,l)=>e.key>l.key?1:e.key<l.key?-1:0)).map((e=>e.data))),[e]);return{enqueue:a,dequeue:()=>{const a=e[0];return l((e=>e.slice(1))),null===a||void 0===a?void 0:a.data},find:o,touch:n,touchOrEnqueue:t,remove:s,trim:r,enumerateSortedByKey:d}})(),G=(0,i.useCallback)(((e,l)=>{if(e&&(null===e||void 0===e?void 0:e.detailLevel)===I.G.Detailed&&(null===e||void 0===e?void 0:e.heroImageUrl)){const a=L(e.productId);a?a.visible=l:y(e.productId,{backgroundImageUrl:`url(${(0,t.getResizeUrl)(null===e||void 0===e?void 0:e.heroImageUrl,1920,1080,!0)})`,productInfo:e,visible:l})}}),[y,L]),A=(0,i.useCallback)(((e,a,o)=>{l.debug(`game changed: ${null===e||void 0===e?void 0:e.title}`),g(e),G(a,!1),G(o,!1),G(e,!0),P(3)}),[l,G,P]),V=(0,i.useMemo)((()=>O().map((e=>(0,o.jsx)(d,{backgroundImageUrl:e.backgroundImageUrl,visible:e.visible},e.productInfo.productId)))),[O]),T=(0,i.useMemo)((()=>[c,u,_]),[c,u,_]);return(0,o.jsxs)(j.Pl,{location:e,children:[(0,o.jsx)(n.BodyTrappable,{}),v&&(0,o.jsx)(r.xb,{"aria-live":"polite",message:`${a}. ${c}. ${u}. ${_}.`}),(0,o.jsx)("div",{children:V}),(0,o.jsx)("div",{className:"OnboardingPage-module__radialGradient___zaA41"}),(0,o.jsx)("div",{className:"OnboardingPage-module__rightGradient___QO537"}),(0,o.jsxs)("div",{className:"OnboardingPage-module__container___43pFw",children:[(0,o.jsx)(R,{className:"OnboardingPage-module__xboxLogo___PjR0b"}),(0,o.jsx)("h2",{className:"OnboardingPage-module__title___akwcn",children:a}),(0,o.jsx)(w,{upsellStrings:T}),(0,o.jsx)(S,{className:"OnboardingPage-module__foreground___93BsR",dispatch:N,telemetryLocation:e,setAnnounceContent:b}),x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D,{game:m}),(0,o.jsx)($,{ref:f,games:C,onGameSelected:A})]})]})]})})),ee=Q}}]);
//# sourceMappingURL=onboarding-page.652883a1.chunk.js.map
