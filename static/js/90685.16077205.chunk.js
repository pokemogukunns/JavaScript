"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[90685],{65921:(e,r,t)=>{t.d(r,{T:()=>n});class n{constructor(e,r,t,n){this.exit=e,this.connectionType=r,this.reason=t,this.errorCode=n}static isErrorState(e){return e instanceof n}}},83881:(e,r,t)=>{t.d(r,{t:()=>i});t(6886);var n=t(2784),s=t(21883),a=t(91912),o=t(87169);const i=e=>{let{adLocation:r,targetId:t,tagId:i,minWidth:u,minHeight:l,ratioWidth:c,ratioHeight:d}=e;const m=(0,n.useContext)(o.A),[p,v]=(0,n.useState)(s.lceFetching),b=(0,n.useRef)();return(0,n.useEffect)((()=>{m&&!b.current&&(b.current=m.fetchTag({adLocation:r,targetId:t,tagId:i,minWidth:u,minHeight:l,ratioWidth:c,ratioHeight:d,onAdAvailable:e=>{v((0,s.lceContent)(e))},onAdError:e=>{v((0,s.lceError)(e))}}))}),[r,m,i,t,c,d,u,l]),(0,n.useEffect)((()=>{(0,s.isContent)(p)&&b.current&&b.current.fireImpressions()}),[p]),(0,n.useEffect)((()=>()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.cleanUp()}),[]),(0,a.s)(p)}},61954:(e,r,t)=>{var n;t.d(r,{B:()=>n}),function(e){e.Provisioning="provisioning",e.Carousel="carousel"}(n||(n={}))},29510:(e,r,t)=>{t.d(r,{R:()=>p});var n=t(814),s=t.n(n),a=(t(71372),t(6710),t(6886),t(46209)),o=t(27372),i=t(2784),u=t(14033),l=t(3968),c=t(765),d=t(99341);const m="useContextualStore",p=e=>{let{productId:r,skuId:t,availabilityId:n,callerApplicationId:p,type:v,scenario:b,sessionTelemetry:g,onLoad:h,onSuccess:S,onError:_,onCancel:f,onClose:y,handleOpenUrl:I}=e;const{telemetryProvider:P}=(0,l.S)(),C=(0,u.c)(),E=null!==p&&void 0!==p?p:C,x=(0,c.R)(),k=(0,i.useMemo)((()=>new a.Logger(m)),[]),[T,w]=(0,i.useState)(),M=(0,i.useRef)(!1),X=(0,i.useRef)(!1),A=(0,i.useMemo)((()=>s()({productId:r,skuId:t,availabilityId:n,storeId:[r,t,n].join("/"),type:v,source:E,page:T,scenario:b,sourceClientName:x},g)),[r,t,n,v,E,T,b,x,g]);r||null===_||void 0===_||_(new Error("Missing productId"),s()(s()({},A),{},{status:o.sCM.PurchaseError}));return{onLoaded:(0,i.useCallback)((()=>{!0!==X.current&&(P.trackEvent(s()({name:d.c.PurchaseStarted},A)),null===h||void 0===h||h(),X.current=!0,k.info(`Purchase loaded for ${A.storeId}`))}),[k,h,A,P]),onResult:e=>{if(k.info(m,"Response from contextual store",e),!0===M.current)return k.warn(m,`Duplicate purchase result detected, returning: ${JSON.stringify(e)}`),void(null===y||void 0===y||y());const{status:r,productId:t,skuId:n,availabilityId:a,orderId:i,error:u,xboxCardUsedForPurchase:l}=e,c=null!==t&&void 0!==t?t:"unknown";switch(r){case o.sCM.Purchased:P.trackEvent(s()(s()({name:d.c.PurchaseCompleted},A),{},{productId:c,skuId:n,availabilityId:a,status:r,orderId:null!==i&&void 0!==i?i:"",xboxCardUsedForPurchase:l})),null===S||void 0===S||S(e),null===y||void 0===y||y();break;case o.sCM.PurchaseError:case o.sCM.ServiceError:throw P.trackEvent(s()(s()({name:d.c.PurchaseError},A),{},{productId:c,skuId:n,availabilityId:a,status:r,error:JSON.stringify(u)})),null===_||void 0===_||_(null!==u&&void 0!==u?u:new Error("Contextual store purchase error"),e),null===y||void 0===y||y(),u;case o.sCM.Canceled:P.trackEvent(s()(s()({name:d.c.PurchaseCancelled},A),{},{productId:c,skuId:n,availabilityId:a,status:r})),null===f||void 0===f||f(),null===y||void 0===y||y();break;case o.sCM.AlreadyPurchased:P.trackEvent(s()(s()({name:d.c.PurchaseCompleted},A),{},{productId:c,skuId:n,availabilityId:a,status:r,orderId:null!==i&&void 0!==i?i:""})),null===_||void 0===_||_(null!==u&&void 0!==u?u:new Error(`Product: ${t}/${n}/${a} already purchased`),e),null===y||void 0===y||y();break;default:P.trackEvent(s()(s()({name:d.c.PurchaseError},A),{},{status:r,productId:c,skuId:n,availabilityId:a,error:JSON.stringify(u)})),null===_||void 0===_||_(null!==u&&void 0!==u?u:new Error("Unknown purchase status"),e),null===y||void 0===y||y()}M.current=!0},onMessage:(0,i.useCallback)((e=>{switch(k.info(e.data),e.type){case o.EqJ.PageChange:w(e.data);break;case o.EqJ.OpenUrl:null===I||void 0===I||I(e.data);break;default:k.error(`Unknown message type encountered: ${e.type}`)}}),[k,I]),sharedTelemetryProps:A,isComplete:M.current}}},28663:(e,r,t)=>{var n,s,a,o,i,u;t.d(r,{OS:()=>o,QM:()=>s,Xb:()=>u,ui:()=>i,z4:()=>a}),function(e){e.Purchased="Purchased",e.Error="Error",e.Canceled="Canceled"}(n||(n={})),function(e){e.Succeeded="Succeeded",e.AlreadyPurchased="AlreadyPurchased",e.NotPurchased="NotPurchased",e.NetworkError="NetworkError",e.ServerError="ServerError"}(s||(s={})),function(e){e.OneCoreRequestPurchase="OneCoreRequestPurchase",e.ShowDetails="ShowDetails",e.ShowDetailsForStoreId="ShowDetailsForStoreId",e.XboxPurchaseApi="XboxPurchaseApi",e.ShowMarketplace="ShowMarketplace",e.XStoreShowPurchaseUi="XStoreShowPurchaseUI",e.XStoreShowProductPageUi="XStoreShowProductPageUI",e.XStoreShowAssociatedProductsUi="XStoreShowAssociatedProductsUI"}(a||(a={})),function(e){e.InStream="InStream",e.InApp="InApp",e.GamePass="GamePass"}(o||(o={})),function(e){e.Test="XETest",e.Native="XENative",e.Web="XEWeb"}(i||(i={})),function(e){e.XboxCom="XboxCom",e.XboxComMobile="XboxComMobile",e.AmazonXgpuSubscriber="gamepassamazontvsub_app_xbo_01_3.26.24",e.AmazonXgpuTrialSubscriber="gamepassamazontvtio_app_xbo_01_3.26.24",e.AmazonXgpuNonSubscriber="gamepassamazontvnosub_app_xbo_01_3.26.24",e.SamsungXgpuSubscriber="gamepasssamsungtvsub_app_xbo_01_5.1.1",e.SamsungXgpuTrialSubscriber="gamepasssamsungtvtio_app_xbo_01_5.1.1",e.SamsungXgpuNonSubscriber="gamepasssamsungtvnosub_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuSubscriber="gamepasssamsungtv3psub_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuTrialSubscriber="gamepasssamsungtv3ptio_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuNonSubscriber="gamepasssamsungtv3pnosub_app_xbo_01_5.1.1"}(u||(u={}))},36849:(e,r,t)=>{t.d(r,{I:()=>v});var n=t(52322),s=t(12524),a=t.n(s),o=t(2784),i=t(28316),u="BaseModal-module__dimmedBackground___eVH0g",l="BaseModal-module__modal___WiWj9",c=t(8318),d=t(98660),m=t(5801);const p=e=>{let{onCloseRequest:r}=e;return(0,d.cu)((0,o.useCallback)((()=>!!r&&(r(),!0)),[r])),null},v=e=>{let{children:r,onCloseRequest:t,onUnmounted:s,backgroundDismissable:d=!0,describedby:v,labeledBy:b,label:g,dimBackground:h}=e;const S=(0,o.useMemo)((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.g3;if("undefined"===typeof document)return;let r=document.getElementById(e);return null===r&&(r=document.createElement("div"),r.id=e,document.body.appendChild(r),r.className=a()(l,"xgp-reset-style")),r}(c.g3)),[]),_=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const e=_.current;if(!e||!t)return;const r=e=>{d&&e.target===e.currentTarget&&!e.defaultPrevented&&(null===t||void 0===t||t())};return e.addEventListener("click",r),()=>e.removeEventListener("click",r)}),[_,t,d]),(0,o.useEffect)((()=>{if(S)return requestAnimationFrame((()=>{var e;if(S.style.display="",S.children.length>0){"true"===(null===(e=S.children.item(S.children.length-1))||void 0===e?void 0:e.getAttribute("data-dim-background"))?S.classList.add(u):S.classList.remove(u)}})),()=>{0===S.children.length&&requestAnimationFrame((()=>{S.style.display="none"}))}}),[S]),(0,o.useEffect)((()=>()=>null===s||void 0===s?void 0:s()),[s]),null==S?null:(0,i.createPortal)((0,n.jsxs)(m.Pl,{location:"Modal",children:[(0,n.jsx)(p,{onCloseRequest:t}),(0,n.jsx)("div",{ref:_,className:"BaseModal-module__content___mRNEB","aria-describedby":v,"aria-labelledby":b,"aria-modal":!0,role:"dialog","data-dim-background":h,"aria-label":g,children:r})]}),S)}},14033:(e,r,t)=>{t.d(r,{c:()=>p});t(6886);var n=t(32062),s=t(3968),a=t(14290),o=t(2784),i=t(34431),u=t(99779),l=t(43831),c=t(58883);const d=l.lN.start([a.Os]);var m=t(28663);const p=()=>{const{deviceInformation:{isFireOS:e,isMobile:r,isTizen:t,isSupportedTVBrowser:l}}=(0,s.S)(),[p]=(()=>{const e=(0,i.A)(),r=(0,o.useCallback)((e=>(0,c.tR)(e,a.Os)),[]),t=(0,o.useMemo)((()=>e?d:void 0),[e]);return(0,u.O)(r,t)})(),v=!0===(0,n.ab)();let b=r?m.Xb.XboxComMobile:m.Xb.XboxCom;return l&&(t?b=v?(null===p||void 0===p?void 0:p.isOwned)?m.Xb.SamsungThirdPartyXgpuSubscriber:(null===p||void 0===p?void 0:p.isTrial)?m.Xb.SamsungThirdPartyXgpuTrialSubscriber:m.Xb.SamsungThirdPartyXgpuNonSubscriber:(null===p||void 0===p?void 0:p.isOwned)?m.Xb.SamsungXgpuSubscriber:(null===p||void 0===p?void 0:p.isTrial)?m.Xb.SamsungXgpuTrialSubscriber:m.Xb.SamsungXgpuNonSubscriber:e&&(b=(null===p||void 0===p?void 0:p.isOwned)?m.Xb.AmazonXgpuSubscriber:(null===p||void 0===p?void 0:p.isTrial)?m.Xb.AmazonXgpuTrialSubscriber:m.Xb.AmazonXgpuNonSubscriber)),b}},37387:(e,r,t)=>{t.d(r,{K:()=>o});var n=t(95577),s=t(49687),a=t(61872);const o=()=>{const{isTV:e}=(0,n.d)(),r=(0,s.nj)(a.y.EnableContextualStoreVNext);return!e&&r}},765:(e,r,t)=>{t.d(r,{R:()=>o});var n=t(36749),s=t(41924),a=t(28663);const o=()=>{const e=(0,n.Z)(),r=(0,s.v)(window.location.hostname);return e||r?a.ui.Test:a.ui.Web}},90685:(e,r,t)=>{t.d(r,{_:()=>fe});var n=t(814),s=t.n(n),a=t(52322),o=t(2784),i="GameStreamBootstrapper-module__container___sTGex",u=(t(73439),t(6886),t(46209)),l=t(36749),c=t(89085),d=t(1931),m=t(50957);var p=t(23383),v=t(74495),b=t(72776);t(36728),t(77950),t(21850),t(85940),t(94908),t(14121),t(60523);var g=t(4517),h=t(62566),S=t(34431),_=t(42153),f=t(61872),y=t(49687),I=t(86114),P=t(79790),C=t(5653),E=t(44442);const x=/^(.*\.xbox\.com.*)?\/play(?:$|(?:\/|\?|#).*)/i,k=/^http(s)?:\/\//i;function T(e,r){const t=(0,g.k6)(),n=(0,h.U)(),s=(0,S.A)(),[a]=(0,_.Z)(),i=(0,o.useRef)(!1),l=(0,y.nj)(f.y.EnableF2PPostPlayUpsell),d=(0,y.nj)(f.y.EnablePrivacyControls),[m]=(0,I.K)(),p=(0,o.useCallback)((()=>{const e="cloud-connect"===r&&l&&i.current&&s&&!1===a;return d?e&&(null===m||void 0===m?void 0:m.personalizedPurchaseUpsellValue):e}),[r,l,d,s,a,m]),v=function(){const e=(0,u.useLogger)("useHandleCustomRedirect"),r=(0,g.k6)(),t=(0,o.useCallback)(((t,n)=>{if(k.test(n)){if(x.test(n)){let t=C.Home.getLink();try{const e=new URL(n);t=e.pathname+e.search+e.hash}catch(s){const r=(0,c.L)(s);e.error("Invalid redirectUrl",r)}r.push(t)}else r.push(C.Home.getLink()),window.open(n,"_blank")}else t.isSwitchStreamRedirectUrl()?r.replace(n):r.push(n)}),[r,e]);return t}(),b=(0,o.useContext)(E.k),T=null===e||void 0===e?void 0:e.navigationManager;(0,o.useEffect)((()=>()=>{null===T||void 0===T||T.setPostStreamRedirectUrl(void 0)}),[T]),(0,o.useEffect)((()=>{if(!e)return;const s=()=>{null===b||void 0===b||b.unblockNavigation();const e=null===T||void 0===T?void 0:T.postStreamRedirectUrl;T&&e?v(T,e):"managed-devkit-connect"===r||("xhome-connect"===r?t.push(P.$7.getLink()):t.push(C.Home.getLink())),n({shouldNavigate:!1,shouldOpenUpsellDialog:p()})},a=()=>{i.current=!0};return e.addEventListener("completed",s,{once:!0}),e.addEventListener("connected",a,{once:!0}),()=>{e.removeEventListener("completed",s),e.removeEventListener("connected",a)}}),[e,t,r,n,a,i,s,l,p,v,b,T])}var w=t(23941),M=t(65921),X=t(64174);function A(e){const r=(0,u.useUniqueLogger)("useSquelchXboxComBanners");(0,o.useEffect)((()=>{if(!e)return;const t=document.querySelector("#pageBannerContainer");if(!t)return void r.warn("Unable to acquire a reference to the Xbox.com banner container");const n=t.style.display;function s(){M.T.isErrorState(null===e||void 0===e?void 0:e.state)||X.k.isNotStartedState(null===e||void 0===e?void 0:e.state)?a():(t.style.display="none",r.debug("Squelched Xbox.com banners"))}function a(){t.style.display=n,r.debug("Allowed Xbox.com banners")}return e.addEventListener("stateChanged",s),s(),()=>{e.removeEventListener("stateChanged",s),a()}}),[e,r])}var L=t(98353),N=(t(31235),t(31168)),j=t(28316),R=t(16216);class D extends Event{constructor(){super(D.type)}}D.type="provisioningAdMountedEvent";var U=t(24462),O=t(95577),B=t(86523);const F=e=>{let{data:{imgUri:r,sponsoredBy:t},eventTarget:n}=e;const[s,i]=(0,B.QF)("Ad_Sponsored_By","Ad_Sponsored_By_With_Name");(0,o.useEffect)((()=>{n.dispatchEvent(new D)}),[n]);const[u,l]=(0,o.useState)(!1),{isSupportedTVBrowser:c}=(0,O.d)();(0,o.useEffect)((()=>{const e=setTimeout((()=>{l(!0)}),c?1500:0);return()=>{clearTimeout(e)}}),[c]);const d=(0,R.WUZ)(i,t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"BannerProvisioningAd-module__bannerSponsorText___TRPtX","aria-label":d,children:s}),u&&(0,a.jsx)(U.p,{alertString:d}),(0,a.jsx)("img",{className:"BannerProvisioningAd-module__bannerItem___Lqaff",src:r,alt:t})]})};var q,H=t(54762),z=t(81634),W=t(51536),G=t(83881),V=t(21883),J=t(91912),Z=t(61954);!function(e){e[e.Dev=28452753]="Dev",e[e.ProdWeb=28452753]="ProdWeb",e[e.ProdTV=28452753]="ProdTV"}(q||(q={}));const $=":xe_banner_prov_ad:",Q=[z.bv],K=(0,o.forwardRef)(((e,r)=>{const[t,n]=(0,o.useState)(),s=(0,o.useRef)(new EventTarget),[,i]=(()=>{const e=(0,y.dh)(f.y.ProvisioningAdsPlacementId),{isTV:r}=(0,O.d)(),t=r?q.ProdTV:q.ProdWeb,n=(0,v.useSelector)(b.Z1)?q.Dev:t,s=null!==e&&void 0!==e?e:n,[,a]=(0,G.t)({adLocation:Z.B.Provisioning,targetId:$,tagId:s,minWidth:180,minHeight:30,ratioWidth:6,ratioHeight:1}),i=(0,o.useMemo)((()=>(0,V.lceTransform)(a,(e=>({imgUri:e.native.image.url,sponsoredBy:e.native.sponsoredBy})))),[a]);return(0,J.s)(i)})(),u=(0,o.useMemo)((()=>()=>({mount:n,unmount:()=>n(void 0),addEventListener:s.current.addEventListener.bind(s.current),removeEventListener:s.current.removeEventListener.bind(s.current)})),[n]);(0,o.useImperativeHandle)(r,u);const l=(0,o.useCallback)((e=>{let{data:r}=e;return(0,a.jsx)(F,{data:r,eventTarget:s.current})}),[]);return null==t?null:(0,j.createPortal)((0,a.jsx)("div",{id:$,children:(0,a.jsx)(N.LceRenderer,{data:i,renderContent:l})}),t)})),Y=(0,o.forwardRef)(((e,r)=>{let{productId:t}=e;const n=(0,y.nj)(f.y.EnableProvisioningAds),s=(0,y.nj)(f.y.EnableProvAdsForChild),o=(0,y.nj)(f.y.EnableProvAdsForXGPU),i=t&&Q.includes(t),u=(0,W._)(),[l]=(0,H.L)();return n&&((u||s)&&(!l||o)&&i)?(0,a.jsx)(K,{ref:r}):null}));var ee=t(25774),re=(t(71372),t(6710),t(34715),t(64925),t(74407),t(26464),t(19570),t(54819),t(64903),t(27372)),te=t(14290),ne=t(27256);var se=t(14033),ae=t(37387),oe=t(98660),ie=t(10022),ue=t(3968),le=t(765),ce=t(99341),de=t(15946),me=t(96473),pe=t(36849);const ve=e=>{let{title:r,message:t,primaryText:n,primaryAction:s,onClose:o}=e;return(0,a.jsx)(pe.I,{onCloseRequest:o,children:(0,a.jsx)(de.FocusContainer,{className:"MessageModal-module__container___wLVnt",autoFocusContainer:!0,children:(0,a.jsx)("div",{className:"MessageModal-module__content___XeqM3",children:(0,a.jsxs)("div",{className:"MessageModal-module__descriptionGroup___0DD-V",children:[(0,a.jsx)("h1",{className:"MessageModal-module__title___qA-PF",children:r}),(0,a.jsx)("div",{className:"MessageModal-module__description___HMaLB",children:t}),(0,a.jsx)(me.kD,{as:"button",onClick:s,className:"MessageModal-module__button___L-7dQ",children:n})]})})})})};var be=t(29510),ge=t(28663);const he=e=>{let{storeId:r,scenario:t,itemTypes:n,sessionTelemetry:i,onResult:l}=e;const[c,d,m]=(0,B.QF)("Purchase_UnsupportedTitle","Purchase_UnsupportedDescription","Close"),p=(0,o.useMemo)((()=>new u.Logger("ContextualStore/MicrosoftContextualStore")),[]),{telemetryProvider:v}=(0,ue.S)(),[b,g,h]=r.split("/"),S=(0,y.nj)(f.y.EnableLegacyPurchaseFlow),_=(0,y.nj)(f.y.EnableIAPBrowseExperience),I=(0,ae.K)(),P=Object.values(ge.z4).includes(t),C=[ge.z4.XStoreShowAssociatedProductsUi,ge.z4.ShowMarketplace].includes(t),E=(0,o.useMemo)((()=>n&&n.split(",").map((e=>{switch(e){case te.Dp.Game:case te.Dp.GameDemo:return[te.Fc.Game,te.Fc.Durable,te.Fc.Consumable];case te.Dp.Consumable:return[te.Fc.Consumable];case te.Dp.Durable:return[te.Fc.Durable];case te.Dp.Application:default:return}})).reduce(((e,r)=>(r&&r.forEach((r=>{e.includes(r)||e.push(r)})),e)),[]).join(",")),[n]),x=!P||!(r&&b)||C&&(!_||S||!E&&C),k=(0,se.c)(),T=(0,le.R)(),w=(0,o.useRef)(!1),M=(0,o.useCallback)((()=>{!0!==w.current?(null===l||void 0===l||l(JSON.stringify({Result:JSON.stringify({purchaseStatus:ge.QM.NotPurchased,data:{productId:b,skuId:g,availabilityId:h,storeId:r,scenario:t}})})),w.current=!0):p.warn("Duplicate purchase cancellation detected...")}),[h,p,l,b,t,g,r]),X=(0,o.useCallback)((e=>{null===l||void 0===l||l(JSON.stringify({Result:JSON.stringify({purchaseStatus:ge.QM.Succeeded,data:s()(s()({},e),{},{scenario:t})})}))}),[l,t]),A=(0,o.useCallback)(((e,r)=>{null===l||void 0===l||l(JSON.stringify({Result:JSON.stringify({purchaseStatus:r.status,data:{error:e,productId:b,skuId:g,availabilityId:h,scenario:t,orderId:r.orderId}})}))}),[h,l,b,t,g]),L=(0,ie.k)(),N=(0,o.useCallback)((e=>{e&&L(function(e){return e.replace(/http(s)?:\/\//,"https://")}(e),"_blank")}),[L]),{onLoaded:j,onResult:R,onMessage:D,sharedTelemetryProps:U}=(0,be.R)({productId:b,skuId:g,availabilityId:h,callerApplicationId:k,type:ge.OS.InStream,sessionTelemetry:i,sourceClientName:T,scenario:t,onSuccess:X,onError:A,onCancel:M,handleOpenUrl:N}),O=(0,o.useCallback)((()=>{A(new Error("Invalid purchase properties"),s()(s()({},U),{},{status:re.sCM.PurchaseError}))}),[A,U]);return(0,oe.cu)((0,o.useCallback)((()=>(v.trackEvent(s()(s()({name:ce.c.PurchaseCancelled},U),{},{status:re.sCM.Canceled})),M(),!0)),[M,U,v])),(0,o.useEffect)((()=>{j()}),[j]),x?(0,a.jsx)(ve,{title:c,message:d,primaryText:m,primaryAction:O,onClose:O}):(0,a.jsx)(ne.m3,{partnerId:re.IGD,children:(0,a.jsx)(re.uL1,{productId:b,availabilityId:h,skuId:g,allowAnonymous:!0,onResult:R,version:S?re.zBs.v1:re.zBs.v2,skipPurchaseConfirmation:!0,tracking:{callerApplicationId:k,campaignId:"CloudGaming.Web"},onMessage:D,options:{fallbackToPurchaseOnError:!0},experience:C?re.vnT.Browse:re.vnT.Details,itemType:E,xStoreScenario:t,clientType:T,activateStoreExperiments:I})})},Se=(0,o.forwardRef)((function(e,r){const t=(0,o.useMemo)((()=>new u.Logger("StreamPage/MicrosoftPurchaseUI")),[]),[n,s]=(0,o.useState)(),[i,l]=(0,o.useState)(),[c,d]=(0,o.useState)(),[m,p]=(0,o.useState)(),[v,b]=(0,o.useState)(),[g,h]=(0,o.useState)(),[S,_]=(0,o.useState)();return(0,o.useImperativeHandle)(r,(()=>({mount(e){t.debug("Mounting at",e),s(e)},unmount(){t.debug("Unmounting"),s(void 0)},setProductId(e){t.debug("Setting product ID to:",e),l(e)},setScenario(e){t.debug("Setting purchase scenario ",e),d(e)},setDesiredItemTypes(e){t.debug("Setting desired item types ",e),p(e)},setSessionTelemetry(e){t.debug("Setting game stream session telemetry"),b((()=>e))},setOnResult(e){t.debug("Adding on result callback"),h((()=>e))},setOnCancel(e){t.debug("Adding on cancel callback"),_((()=>e))}}))),null==n||null==i||null==c?null:(0,j.createPortal)((0,a.jsx)(he,{storeId:i,scenario:c,itemTypes:m,onResult:g,onCancel:S,onClose:S,sessionTelemetry:v}),n)}));function _e(e){let{streamClient:r,user:n,config:s}=e;var g;const h=(0,o.useRef)(),S=(0,o.useRef)(),_=(0,o.useRef)(),f=(0,p.I)(h,S,_,r,n,s),y=(0,L.B)();(0,w.d)(f,s,y),T(f,s.connectMode),A(f);const I=function(){const e=(0,d.I)((()=>new u.Logger("GameStreamBootstrapper/useDevToolsOverlay"))),r=(0,l.Z)();return(0,m.sZ)((0,o.useCallback)((async()=>{var n;if(r)try{const{GameStreamOverlay:e}=await Promise.all([t.e(81772),t.e(22674),t.e(10589),t.e(36979)]).then(t.bind(t,10544));return e}catch(s){const r=(0,c.L)(s);return void(null===(n=e.current)||void 0===n||n.error(`Enable to import DevToolsOverlay - ${r.message}`,r))}}),[r,e]))}(),P=function(){const e=(0,d.I)((()=>new u.Logger("GameStreamBootstrapper/useInternalDevTools"))),r=(0,v.useSelector)(b.Z1);return(0,m.sZ)((0,o.useCallback)((async()=>{}),[r,e]))}(),C="titleInfo"in s?s.titleInfo:void 0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Se,{ref:S}),(0,a.jsx)(Y,{ref:_,productId:null===(g=null===C||void 0===C?void 0:C.product)||void 0===g?void 0:g.productId}),(0,a.jsxs)("div",{className:i,children:[(0,a.jsx)("section",{className:i,ref:h}),I&&f&&(0,a.jsx)(I,{gameStream:f}),P&&f&&(0,a.jsx)(P,{gameStream:f})]})]})}const fe=(0,o.memo)((e=>(0,ee.r)()?null:(0,a.jsx)(_e,s()({},e))))},98353:(e,r,t)=>{t.d(r,{B:()=>h});t(634),t(36728),t(81804),t(77950),t(94908),t(6886),t(60523);var n=t(80631),s=t(2784),a=t(4517),o=t(36749),i=t(61872),u=t(49687),l=t(5653);const{productId:c,title:d,description:m,creator:p,image:v,payload:b}=l.ShareStatePrototypeTestHarness.QueryStrings,g=[c,d,m,p,v,b];function h(){const e=(0,u.nj)(i.y.EnableShareStatePrototype),r=(0,o.Z)(),t=e||r,{search:l,state:c}=(0,a.TH)(),d=(0,s.useMemo)((()=>{if(!l||!t)return;const e=[],r=new URLSearchParams(l);for(const t of g){const n=r.get(t);if(null==n)return;e.push([t,n])}return e.length===g.length?Object.fromEntries(e):void 0}),[t,l]);if(t)return d||((0,n.isStateSharePrototypeData)(c)?c:void 0)}},44442:(e,r,t)=>{t.d(r,{k:()=>n});const n=(0,t(2784).createContext)(void 0);n.displayName="Navigation"}}]);
//# sourceMappingURL=90685.16077205.chunk.js.map
