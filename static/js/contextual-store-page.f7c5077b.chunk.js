"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[51769],{34431:(e,r,a)=>{a.d(r,{A:()=>t});var o=a(28248),s=a(74495);const t=()=>(0,s.useSelector)(o.yB)},29510:(e,r,a)=>{a.d(r,{R:()=>b});var o=a(814),s=a.n(o),t=(a(71372),a(6710),a(6886),a(46209)),u=a(27372),n=a(2784),i=a(14033),d=a(3968),l=a(765),c=a(99341);const p="useContextualStore",b=e=>{let{productId:r,skuId:a,availabilityId:o,callerApplicationId:b,type:v,scenario:S,sessionTelemetry:m,onLoad:g,onSuccess:h,onError:I,onCancel:_,onClose:E,handleOpenUrl:P}=e;const{telemetryProvider:X}=(0,d.S)(),C=(0,i.c)(),T=null!==b&&void 0!==b?b:C,k=(0,l.R)(),y=(0,n.useMemo)((()=>new t.Logger(p)),[]),[w,x]=(0,n.useState)(),A=(0,n.useRef)(!1),M=(0,n.useRef)(!1),N=(0,n.useMemo)((()=>s()({productId:r,skuId:a,availabilityId:o,storeId:[r,a,o].join("/"),type:v,source:T,page:w,scenario:S,sourceClientName:k},m)),[r,a,o,v,T,w,S,k,m]);r||null===I||void 0===I||I(new Error("Missing productId"),s()(s()({},N),{},{status:u.sCM.PurchaseError}));return{onLoaded:(0,n.useCallback)((()=>{!0!==M.current&&(X.trackEvent(s()({name:c.c.PurchaseStarted},N)),null===g||void 0===g||g(),M.current=!0,y.info(`Purchase loaded for ${N.storeId}`))}),[y,g,N,X]),onResult:e=>{if(y.info(p,"Response from contextual store",e),!0===A.current)return y.warn(p,`Duplicate purchase result detected, returning: ${JSON.stringify(e)}`),void(null===E||void 0===E||E());const{status:r,productId:a,skuId:o,availabilityId:t,orderId:n,error:i,xboxCardUsedForPurchase:d}=e,l=null!==a&&void 0!==a?a:"unknown";switch(r){case u.sCM.Purchased:X.trackEvent(s()(s()({name:c.c.PurchaseCompleted},N),{},{productId:l,skuId:o,availabilityId:t,status:r,orderId:null!==n&&void 0!==n?n:"",xboxCardUsedForPurchase:d})),null===h||void 0===h||h(e),null===E||void 0===E||E();break;case u.sCM.PurchaseError:case u.sCM.ServiceError:throw X.trackEvent(s()(s()({name:c.c.PurchaseError},N),{},{productId:l,skuId:o,availabilityId:t,status:r,error:JSON.stringify(i)})),null===I||void 0===I||I(null!==i&&void 0!==i?i:new Error("Contextual store purchase error"),e),null===E||void 0===E||E(),i;case u.sCM.Canceled:X.trackEvent(s()(s()({name:c.c.PurchaseCancelled},N),{},{productId:l,skuId:o,availabilityId:t,status:r})),null===_||void 0===_||_(),null===E||void 0===E||E();break;case u.sCM.AlreadyPurchased:X.trackEvent(s()(s()({name:c.c.PurchaseCompleted},N),{},{productId:l,skuId:o,availabilityId:t,status:r,orderId:null!==n&&void 0!==n?n:""})),null===I||void 0===I||I(null!==i&&void 0!==i?i:new Error(`Product: ${a}/${o}/${t} already purchased`),e),null===E||void 0===E||E();break;default:X.trackEvent(s()(s()({name:c.c.PurchaseError},N),{},{status:r,productId:l,skuId:o,availabilityId:t,error:JSON.stringify(i)})),null===I||void 0===I||I(null!==i&&void 0!==i?i:new Error("Unknown purchase status"),e),null===E||void 0===E||E()}A.current=!0},onMessage:(0,n.useCallback)((e=>{switch(y.info(e.data),e.type){case u.EqJ.PageChange:x(e.data);break;case u.EqJ.OpenUrl:null===P||void 0===P||P(e.data);break;default:y.error(`Unknown message type encountered: ${e.type}`)}}),[y,P]),sharedTelemetryProps:N,isComplete:A.current}}},28663:(e,r,a)=>{var o,s,t,u,n,i;a.d(r,{OS:()=>u,QM:()=>s,Xb:()=>i,ui:()=>n,z4:()=>t}),function(e){e.Purchased="Purchased",e.Error="Error",e.Canceled="Canceled"}(o||(o={})),function(e){e.Succeeded="Succeeded",e.AlreadyPurchased="AlreadyPurchased",e.NotPurchased="NotPurchased",e.NetworkError="NetworkError",e.ServerError="ServerError"}(s||(s={})),function(e){e.OneCoreRequestPurchase="OneCoreRequestPurchase",e.ShowDetails="ShowDetails",e.ShowDetailsForStoreId="ShowDetailsForStoreId",e.XboxPurchaseApi="XboxPurchaseApi",e.ShowMarketplace="ShowMarketplace",e.XStoreShowPurchaseUi="XStoreShowPurchaseUI",e.XStoreShowProductPageUi="XStoreShowProductPageUI",e.XStoreShowAssociatedProductsUi="XStoreShowAssociatedProductsUI"}(t||(t={})),function(e){e.InStream="InStream",e.InApp="InApp",e.GamePass="GamePass"}(u||(u={})),function(e){e.Test="XETest",e.Native="XENative",e.Web="XEWeb"}(n||(n={})),function(e){e.XboxCom="XboxCom",e.XboxComMobile="XboxComMobile",e.AmazonXgpuSubscriber="gamepassamazontvsub_app_xbo_01_3.26.24",e.AmazonXgpuTrialSubscriber="gamepassamazontvtio_app_xbo_01_3.26.24",e.AmazonXgpuNonSubscriber="gamepassamazontvnosub_app_xbo_01_3.26.24",e.SamsungXgpuSubscriber="gamepasssamsungtvsub_app_xbo_01_5.1.1",e.SamsungXgpuTrialSubscriber="gamepasssamsungtvtio_app_xbo_01_5.1.1",e.SamsungXgpuNonSubscriber="gamepasssamsungtvnosub_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuSubscriber="gamepasssamsungtv3psub_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuTrialSubscriber="gamepasssamsungtv3ptio_app_xbo_01_5.1.1",e.SamsungThirdPartyXgpuNonSubscriber="gamepasssamsungtv3pnosub_app_xbo_01_5.1.1"}(i||(i={}))},14033:(e,r,a)=>{a.d(r,{c:()=>b});a(6886);var o=a(32062),s=a(3968),t=a(14290),u=a(2784),n=a(34431),i=a(99779),d=a(43831),l=a(58883);const c=d.lN.start([t.Os]);var p=a(28663);const b=()=>{const{deviceInformation:{isFireOS:e,isMobile:r,isTizen:a,isSupportedTVBrowser:d}}=(0,s.S)(),[b]=(()=>{const e=(0,n.A)(),r=(0,u.useCallback)((e=>(0,l.tR)(e,t.Os)),[]),a=(0,u.useMemo)((()=>e?c:void 0),[e]);return(0,i.O)(r,a)})(),v=!0===(0,o.ab)();let S=r?p.Xb.XboxComMobile:p.Xb.XboxCom;return d&&(a?S=v?(null===b||void 0===b?void 0:b.isOwned)?p.Xb.SamsungThirdPartyXgpuSubscriber:(null===b||void 0===b?void 0:b.isTrial)?p.Xb.SamsungThirdPartyXgpuTrialSubscriber:p.Xb.SamsungThirdPartyXgpuNonSubscriber:(null===b||void 0===b?void 0:b.isOwned)?p.Xb.SamsungXgpuSubscriber:(null===b||void 0===b?void 0:b.isTrial)?p.Xb.SamsungXgpuTrialSubscriber:p.Xb.SamsungXgpuNonSubscriber:e&&(S=(null===b||void 0===b?void 0:b.isOwned)?p.Xb.AmazonXgpuSubscriber:(null===b||void 0===b?void 0:b.isTrial)?p.Xb.AmazonXgpuTrialSubscriber:p.Xb.AmazonXgpuNonSubscriber)),S}},5367:(e,r,a)=>{a.d(r,{D:()=>s,q:()=>t});var o=a(2053);const s=e=>(0,o.j)().get(e),t=e=>{var r;return null!==(r=s(e))&&void 0!==r?r:""}},765:(e,r,a)=>{a.d(r,{R:()=>u});var o=a(36749),s=a(41924),t=a(28663);const u=()=>{const e=(0,o.Z)(),r=(0,s.v)(window.location.hostname);return e||r?t.ui.Test:t.ui.Web}},2053:(e,r,a)=>{a.d(r,{j:()=>t});a(77950),a(94908),a(6886),a(60523);var o=a(2784),s=a(4517);const t=()=>{const{search:e}=(0,s.TH)();return(0,o.useMemo)((()=>new URLSearchParams(e)),[e])}},35162:(e,r,a)=>{a.r(r),a.d(r,{ContextualStorePage:()=>S,default:()=>m});a(36728),a(6886);var o=a(52322),s=a(27372),t=a(27256),u=a(2784),n=a(4517),i=a(14290);var d=a(29510),l=a(28663),c=a(5367),p=a(55415),b=a(5653),v=a(5801);const S=()=>{const e=(0,n.k6)(),{trackLink:r}=(0,v.hW)(),{productId:a,skuId:S,availabilityId:m}=(0,n.UO)(),g=(0,c.D)(b.ContextualStoreWrapper.QueryStrings.callerApplicationId),[h]=(0,p.M)(a),I=(0,u.useCallback)((o=>{var s;const t=null!==(s=o.productId)&&void 0!==s?s:a;r(b.Store.getLink(t,null===h||void 0===h?void 0:h.title)),e.push(b.Store.getLink(t,null===h||void 0===h?void 0:h.title))}),[e,a,null===h||void 0===h?void 0:h.title,r]),_=(e=>e===i.Os||e===i.kE)(a),{onResult:E,onLoaded:P,onMessage:X}=(0,d.R)({productId:a,skuId:S,availabilityId:m,type:_?l.OS.GamePass:l.OS.InStream,callerApplicationId:g,onSuccess:I});return(0,u.useEffect)((()=>{P()}),[P]),(0,o.jsx)(t.m3,{partnerId:s.IGD,children:(0,o.jsx)(s.Ype,{onResult:E,onMessage:X})})},m=S},43831:(e,r,a)=>{a.d(r,{Ub:()=>u,lN:()=>n,mc:()=>t});var o=a(2541),s=a(87804);const t=(0,o.PH)(s.s.Entitlements,"RESET",(()=>({}))),u=t(),n=(0,o.FZ)(s.s.Entitlements,"FETCH_ENTITLEMENTS_START",(e=>({productIds:e})),"FETCH_ENTITLEMENTS_COMPLETED",((e,r)=>({productIds:e,response:r})),"FETCH_ENTITLEMENTS_ERROR",((e,r)=>({productIds:e,error:r})))}}]);
//# sourceMappingURL=contextual-store-page.f7c5077b.chunk.js.map
